import{t as G,s as C,b as o,d as q}from"./index-DCSMr4ef.js";import{W as P,H as W}from"./screen-jNpdIWPy.js";let L="Bear Simulator",O={"background-color":"lightgreen","background-size":"cover"},u=50,D=!1,z=0,w=["🐻","⚫","🍓","🍇","🍒","🐰","🦴","🌳","🌲","🎄"],n=C();n.image=w[0];n.x=g(P/u)*u+u/2;n.y=g(W/u)*u+u/2;n.yScale=.85;n.xScale=.85;n.live=!1;n.maxHunger=50;n.hunger=n.maxHunger;let c=null,B=0,h=[],Q=0,f=[],s=[],j=0,b=[],m={right:!1,down:!1,left:!1,up:!1,space:!1},i=[n.x,n.y];function g(e){return Math.floor(Math.random()*e)}function T(e){let a=0;d(n,e)&&a++,d(c,e)&&a++;for(let l=0;l<h.length;l++)d(h[l],e)&&a++;for(let l=0;l<f.length;l++)d(f[l],e)&&a++;for(let l=0;l<b.length;l++)d(b[l],e)&&a++;return a===0}function N(e,a){for(D=!1;D==!1;){let l={x:g(P/u)*u+u/2,y:g(W/u)*u+u/2};switch(a){case n:n.x=l.x,n.y=l.y,D=!0;break;case h:T(l)&&(e.x=l.x,e.y=l.y,D=!0);break;case f:T(l)&&(e.x=l.x,e.y=l.y,D=!0);break;case b:T(l)&&(e.x=l.x,e.y=l.y,D=!0);break}}}function k(e){delete e.y,delete e.x,q(e)}function d(e,a){return e!=null&&a!=null&&e.x==a.x&&e.y==a.y}function S(e){switch(e){case c:c!=null&&k(c);break;case h:if(e[0]!=e.length)for(let a=0;a<e.length;a++){for(let l=0;l<e[a].berries.length;l++)k(e[a].berries[l]);k(e[a])}break;case f:if(e[0]!=e.length)for(let a=0;a<e.length;a++)k(e[a]);break;case s:if(e[0]!=e.length)for(let a=0;a<e.length;a++)e[a].age>=2?k(e[a]):e[a].age++;break;case b:if(e[0]!=e.length)for(let a=0;a<e.length;a++)k(e[a]);break}}function I(e){switch(e){case h:return B=15,B;case f:return Q=5,Q;case b:return j=25,j}}function v(e){switch(e){case c:c=C(),c.x=n.x,c.y=n.y,c.image=w[1],c.yScale=.85,c.xScale=.85;break;case h:for(let a=0;a<I(h);a++){e[a]=C(),N(e[a],e),e[a].image=w[7],e[a].yScale=.6,e[a].xScale=.9,e[a].berries=[];let l=g(3)+3,r=[],x=w[g(3)+2];for(let H=0;H<l;H++){let y=e[a].berries.length;switch(e[a].berries[y]=C(),l){case 3:r=[[0,7],[10,-3],[-10,-3]],e[a].berries[y].x=e[a].x+r[H][0]+g(3)-1,e[a].berries[y].y=e[a].y+r[H][1]+g(3)-1;break;case 4:r=[[0,8],[11,-4],[-11,-4],[0,-2]],e[a].berries[y].x=e[a].x+r[H][0]+g(5)-2,e[a].berries[y].y=e[a].y+r[H][1]+g(5)-2;break;case 5:r=[[5,8],[-5,8],[-11,-4],[11,-4],[0,-2]],e[a].berries[y].x=e[a].x+r[H][0]+g(3)-1,e[a].berries[y].y=e[a].y+r[H][1]+g(3)-1;break}e[a].berries[y].yScale=g(10)/100+.15,e[a].berries[y].xScale=e[a].berries[y].yScale,e[a].berries[y].image=x,e[a].berries[y].rotation=g(60)-30,x!="🍒"&&(e[a].berries[y].rotation=e[a].berries[y].rotation+37.5)}}break;case f:for(let a=0;a<I(f);a++)e[a]=C(),N(e[a],e),e[a].image=w[5],e[a].yScale=.85,e[a].xScale=.85;break;case b:for(let a=0;a<I(b);a++){let l=g(1e3),r=10;[l]==0?r=9:[l]>0&&[l]<1e3&&(r=8),e[a]=C(),N(e[a],e),e[a].image=w[r],e[a].yScale=.88,e[a].xScale=.88}break}}function t(e){switch(e){case"spaceless":d(c,n)?n.image="":n.image=w[0];break;case"spaced":if(d(c,n)){F();break}else break;case h:for(let a=0;a<e.length;a++)if(d(e[a],n)&&e[a].berries[0].image!=""){if(e[a].berries[0].image=="🍒"){n.hunger=n.hunger+4,n.hunger>n.maxHunger&&(n.hunger=n.maxHunger);for(let l=0;l<e[a].berries.length;l++)e[a].berries[l].image="",k(e[a].berries[l])}else if(e[a].berries[0].image=="🍇"){n.hunger=n.hunger+8,n.hunger>n.maxHunger&&(n.hunger=n.maxHunger);for(let l=0;l<e[a].berries.length;l++)e[a].berries[l].image="",k(e[a].berries[l])}else if(e[a].berries[0].image=="🍓"){n.hunger=n.hunger+6,n.hunger>n.maxHunger&&(n.hunger=n.maxHunger);for(let l=0;l<e[a].berries.length;l++)e[a].berries[l].image="",k(e[a].berries[l])}}break;case f:for(let a=0;a<e.length;a++)if(d(e[a],n)){n.hunger=n.hunger+11,n.hunger>n.maxHunger&&(n.hunger=n.maxHunger);for(let l=0;l<g(4)+2;l++){let r=s.length;s[r]=C(),s[r].x=e[a].x+g(30)-15,s[r].y=e[a].y+g(30)-15,s[r].image=w[6],s[r].age=0,s[r].yScale=.25,s[r].xScale=.25,s[r].rotation=g(360)}k(e[a]);break}break;case b:for(let a=0;a<e.length;a++)d(e[a],n)&&(n.x=i[0],n.y=i[1])}}function E(e){let a=0,l=5;for(let r=0;r<e.length;){e==f&&(l=g(4));let x={x:e[r].x,y:e[r].y};l===0?x.y=x.y+u:l===1?x.x=x.x+u:l===2?x.y=x.y-u:l===3&&(x.x=x.x-u),T(x)&&!M(x)&&(e[r].x=x.x,e[r].y=x.y,a=0,r++),a++,a==50&&r++}}function A(){z=0,n.hunger=n.maxHunger,n.live=!0,N(n,n),S(c),S(h),S(f),S(b),S(s),v(c),v(h),v(f),v(b)}function F(){z++,n.hunger=n.hunger,n.hunger<=0&&(n.hunger=0),N(n,n),S(c),S(h),S(f),S(b),S(s),v(c),v(h),v(f),v(b)}function M(e){if(e.x>P-u/2||e.x<u/2)if(e==n)n.x=i[0];else return!0;if(e.y>W-u/2||e.y<u/2)if(e==n)n.y=i[1];else return!0;return!1}function R(e,a){G.title="",G.score="Day: "+z.toString(),G.score+="<br>Hunger: "+n.hunger.toString(),n.live?(o.right&&m.right!=o.right&&(i[0]=n.x,i[1]=n.y,n.x+=u,o.right=m.right,M(n),t(b),i[0]!=n.x&&(t(f),E(f),n.hunger-=1,n.hunger<=0&&(n.hunger=0)),t(h),t(f)),o.left&&m.left!=o.left&&(i[0]=n.x,i[1]=n.y,n.x-=u,o.left=m.left,M(n),t(b),i[0]!=n.x&&(t(f),E(f),n.hunger-=1,n.hunger<=0&&(n.hunger=0)),t(h),t(f)),o.up&&m.up!=o.up&&(i[1]=n.y,i[0]=n.x,n.y+=u,o.up=m.up,M(n),t(b),i[1]!=n.y&&(t(f),E(f),n.hunger-=1,n.hunger<=0&&(n.hunger=0)),t(h),t(f)),o.down&&m.down!=o.down&&(i[1]=n.y,i[0]=n.x,n.y-=u,o.down=m.down,M(n),t(b),i[1]!=n.y&&(t(f),E(f),n.hunger-=1,n.hunger<=0&&(n.hunger=0)),t(h),t(f)),n.hunger<=0&&(n.live=!1),o.enter&&(n.hunger=0),t("spaceless"),o.space&&m.space!=o.space&&(o.space=m.space,t("spaced"))):o.space&&m.space!=o.space&&(o.space=m.space,A())}export{O as background,R as frame,L as name};
